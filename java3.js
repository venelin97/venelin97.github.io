

// ====== Данни за събитията ======
function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
};

const eventsData = {
  Ant: [
    {title:"Държавност и културно наследство на тракийските племена", text:"Траките са били един от най-многобройните народи в античността, разделени на над 80 племена. Те не са оставили писменост, но тяхното богатство и духовност личат в уникалните гробници и златни съкровища като Панагюрското. Тракийските конници са били легендарни, а вярванията им в безсмъртието на душата са вдъхновили митове за герои като Орфей. Одриското царство е първият им опит да обединят тези племена в мощна държава, която е съперничила дори на Атина.", image:"images/traki.jpg"},
    {title:"Великата гръцка колонизация по Черноморското крайбрежие", text:"Черно море, наричано от гърците Понтос Еуксейнос (Гостоприемно море), става сцена на мащабна колонизация. Одесос (Варна) и Месемврия (Несебър) не са били просто градове, а живи мостове между елинската култура и вътрешността на Тракия. Тук са се обменяли фини гръцки вина и керамика срещу тракийско зърно, метали и кожи. Месемврия дори е секла свои собствени златни монети, което доказва огромната икономическа мощ на тези пристанища.", image:"images/Odesos.jpg"},
    {title:"Елинистическа експанзия и основаването на Филипопол", text:"През 342 г. пр. Хр. македонският владетел Филип II, бащата на Александър Велики, предприема мащабен поход в Тракия. Той завладява стратегическото тракийско селище Еумолпия и го превръща в укрепен град, наречен на негово име – Филипопол (днешен Пловдив). Градът е разположен на три хълма и бързо се превръща в най-важния икономически и административен център на антична Тракия. Това поставя началото на дълбоко елинистическо влияние върху местната аристокрация, култура и бит.",  image:"images/filip.jpg"},
    {title:"Административно и културно устройство под римска власт", text:"Рим не просто завладява Тракия, той я преобразява. След 46 г. сл. Хр. по нашите земи се издигат градове със сложна канализация, амфитеатри и терми (бани). Римляните изграждат 'магистралите' на античността – Via Militaris и Via Pontica, които свързват Рим с Константинопол. Сердика (днешна София) става толкова важна, че император Константин Велики често е казвал: 'Сердика е моят Рим!'. Дори днес, разхождайки се в центъра на София, стъпваме върху плочите на този древен град.",  image:"images/okupacia.jpg"},
    {title:"Духовен синкретизъм и разпространение на християнството", text:"Разпространение на римска култура, латински език и християнство в някои региони.", image:"images/trakiizkustvo.jpg"}
  ],
  Sredn: [
    {title:"Създаване на Първото българско царство", text:"През 681 г. византийският император Константин IV е принуден да подпише мирен договор и да плаща данък на един нов и непознат народ. Това е официалното признание на България. Хан Аспарух избира Плиска за столица – огромен град, заобиколен от земни валове и каменни стени, който е заемал площ от 23 кв. км (по-голям от тогавашния Константинопол). Българите донасят със себе си държавна организация, която съчетава войнствеността на прабългарите с уседналия начин на живот на славяните.",  image:"images/1vo bg charstvo.jpg"},
    {title:"Съперничество между България и Византия за балканско надмощие", text:"Отношенията между България и Източната римска империя (Византия) са низ от военни конфликти и периоди на културен обмен. От кан Тервел, който спасява Константинопол от арабите, до кан Крум, който влиза в пряк двубой с император Никифор, борбата е за надмощие на Балканите. Византия не приема лесно присъствието на независима държава на своите граници, но именно в тези войни се калява българската народност. Този период завършва с падането на Първото царство, но и с трайното възприемане на православието и византийския държавен модел.",  image:"images/bitkisvisantiq.jpg"},
    {title:"Златен век на България", text:"При цар Симеон Велики България не е просто военна сила, тя е културен хегемон. След като приема християнството при Борис I, страната се нуждае от собствена писменост. Симеон превръща новата столица Велики Преслав в 'преславен' град с бели каменни стени и позлатени куполи. Тук работят книжовници, които превеждат най-важните християнски текстове на старобългарски език, превръщайки България в духовен фар за всички славянски народи. Това е времето на 'Три морета' – България се мие от водите на Черно, Егейско и Адриатическо море.", image:"images/zlatenvek.jpg"},
    {title:"Залез на Първата българска държава", text:"Краят на Първото царство е изпълнен с драматизъм и героизъм. Цар Самуил води епична съпротива срещу византийския император Василий II, наречен по-късно 'Българоубиец'. В продължение на десетилетия двете империи са в състояние на перманентна война. Трагедията след битката при Беласица (1014 г.), където 15 000 български войници са ослепени, пречупва сърцето на царя, но не и духа на народа. През 1018 г. България пада под византийска власт, но съхранява своята култура и църква, което помага за бъдещото ѝ възкресение.", image:"images/padane.jpg"}
  ],
  Vazr: [
    {title:"Национално възраждане", text:"След векове на застой, през 1762 г. един монах в Атонския манастир написва книга, която променя всичко. Паисий Хилендарски се обръща към народа си с думите: 'О, неразумни и юроде! Поради що се срамиш да се наречеш българин?'. Неговата 'История славянобългарска' е искрата, която разпалва националното самосъзнание. Започва епоха на бурно строителство на църкви и училища. Българите започват сами да финансират образованието си, изпращайки децата си да учат в Русия, Франция и Австрия, подготвяйки се за своята свобода.",  image:"images/paisiy.jpg"},
    {title:"Българската борба за независимост", text:"Васил Левски, наричан Апостола на свободата, прави нещо революционно за времето си – той създава 'държава в държавата'. Неговата тайна комитетска мрежа обхваща всяко село и град, подготвяйки народа за мига, в който ще 'въскръсне България'. Заедно с пламенния поет Христо Ботев, те задават идеала за 'чиста и свята република'. Априлското въстание от 1876 г., макар и удавено в кръв, постига своята политическа цел – светът научава за българската кауза и принуждава Великите сили да се намесят.",  image:"images/levski.jpg"},
    {title:"Руско-турската война", text:"Руско-турската война от 1877–1878 г. е кулминацията на българския национален въпрос. След Априлското въстание, което разтърсва Европа, руският император Александър II обявява война на Османската империя. Епичните боеве при Шипка, където българските опълченци проявяват нечуван героизъм, и обсадата на Плевен предрешават изхода на конфликта. На 3 март 1878 г. в Сан Стефано е подписан договор, който след близо пет века полага основите на Третата българска държава.",  image:"images/ruskoturska.jpg"},
    {title:"Учредяване на Княжество България", text:"След Освобождението, в старопрестолния град Търново се свиква Учредителното събрание (1879 г.). Неговата задача е да създаде Търновската конституция – един от най-либералните и демократични закони в тогавашна Европа. България се превръща в конституционна монархия с парламент. Първият избран владетел е Александър I Батенберг. Това е време на изграждане на държавни институции, съдебна система и редовна армия, които трябва да превърнат младото княжество в модерна европейска сила.",  image:"images/uchrezdavane.jpg"},
    {title:"Развитие на светското новобългарско образование", text:"Възраждането на българския дух започва от класната стая. Движението за новобългарско образование заменя килийните училища със светски девически и мъжки гимназии. Васил Априлов основава първото взаимно училище в Габрово през 1835 г. След 1878 г. държавата поема образованието под свое крило, въвеждайки задължително обучение. Този период бележи превръщането на неграмотния народ в нация с интелигенция, способна да управлява държавните дела и да развива науката и изкуството.",  image:"images/uchiliste.jpg"}
  ],
  NovoVr: [
    {title:"Обявяване независимостта на Царство България", text:"Три десетилетия след Освобождението, България все още е васално княжество на Османската империя по документи. На 22 септември 1908 г. в старата столица Велико Търново, княз Фердинанд прочита Манифеста за независимостта. Това не е просто символичен акт – с него България става равноправна на другите европейски държави, спира да плаща годишен данък на султана и получава правото на собствена външна политика. Този ден показва, че българската дипломация е пораснала и може да печели битки без нито един изстрел.",  image:"images/nezavisimost.jpg"},
    {title:"България в Първата световна война", text:"През 1915 г. България влиза в Голямата война на страната на Централните сили (Германия, Австро-Унгария и Турция). Основният стремеж е обединението на разпокъсаните български земи в Македония и Тракия. Българската армия постига невероятни победи на Добруджанския и Македонския фронт, демонстрирайки висока бойна ефективност. Въпреки това, поражението на съюзниците води до Ньойския договор – втората национална катастрофа, която лишава страната от излаз на Бяло море и откъсва важни територии.",  image:"images/1svetovna.jpg"},
    {title:"България във Втората световна война", text:"По време на глобалния конфликт (1939–1945), България се опитва да запази неутралитет, но през 1941 г. е принудена да се присъедини към Тристранния пакт. Въпреки натиска от нацистка Германия, цар Борис III и българското гражданско общество отказват да изпратят войски на Източния фронт срещу Русия и успяват да спасят близо 50 000 български евреи от депортация. Войната за България завършва с навлизането на съветските войски на 8 септември 1944 г. и радикална смяна на политическата система.",  image:"images/2rasvetovna.jpg"},
    {title:"Социалистическа държава", text:"След 1944 г. България е обявена за Народна република и попада в сферата на влияние на СССР. През следващите 45 години се установява еднопартийна система начело с Българската комунистическа партия. Страната преминава през насилствена колективизация на земята и мащабна индустриализация. Построени са нови градове, заводи и язовири. Въпреки социалните придобивки и липсата на безработица, периодът е белязан от политически репресии, липса на свобода на словото и желязна завеса пред останалия свят.",  image:"images/todor.jpg"},
    {title:"Демократични промени", text:"Падането на Берлинската стена през 1989 г. отекна и в България. На 10 ноември Тодор Живков е свален от власт след 35-годишно управление. Започва трудният път на прехода – от планова икономика към пазарна и от тоталитаризъм към демокрация. Тези години са изпълнени с надежди, митинги и икономически трудности. Но усилията се отплащат: през 2004 г. България става част от НАТО, а през 2007 г. се завръща в европейското семейство като член на ЕС, което отваря границите за пътуване, работа и образование в цяла Европа.",  image:"images/es.jpg" }
  ]
};

// ====== Данни за квиза ======
// ====== ВЪПРОСИ С ВАРИАНТИ ======
const extraQuestions = [
  {
    q: "Кой е основателят на Първото българско царство?",
    correct: "хан Аспарух",
    options: ["хан Аспарух", "Крум", "Симеон Велики"]
  },
  {
    q: "През коя година България обявява независимост?",
    correct: "1908",
    options: ["1878", "1908", "1944"]
  },
  {
    q: "На кой е съюзник България през 2-рата световна война?",
    correct: "Германия",
    options: ["СССР", "Германия", "Англия"]
  },
  {
    q: "При кого България е в Златния си век?",
    correct: "Симеон Велики",
    options: ["Борис I", "Симеон Велики", "Иван Асен II"]
  },
  {
    q: "На чия страна е България по време на Първата световна война?",
    correct: "Тройния съюз",
    options: ["Антантата", "Тройния съюз", "Неутрална"]
  },
  {
    q: "Благодарение на кой договор България е освободена през 1878 г.?",
    correct: "Санстефанския",
    options: ["Берлинския", "Санстефанския", "Ньойския"]
  },
  {
    q: "Кой е начело на България 1944–1989?",
    correct: "Тодор Живков",
    options: ["Тодор Живков", "Вълко Червенков", "Георги Димитров"]
  },
  {
    q: "През коя година започва преходът към демокрация?",
    correct: "1989",
    options: ["1944", "1989", "1997"]
  },
  {
    q: "Коя империя е владяла България преди 1878?",
    correct: "Османската империя",
    options: ["Астро-Унгария", "Османската империя", "Персия"]
  }
];
let quizQuestions = [...extraQuestions];


    
function shuffleQuiz() {
    quizQuestions = extraQuestions.map(q => ({
        ...q,
        options: shuffleArray([...q.options])
    }));

    quizQuestions = shuffleArray(quizQuestions);
    showQuiz();
}
;

// ===== СЕКЦИИ =====


function showEpoch(epoch) {
    const box = document.getElementById("events");
    box.innerHTML = "";

    // махни highlight от всички епохи
    document.querySelectorAll("#timeline button")
        .forEach(b => b.classList.remove("active-epoch"));

    // highlight на натиснатия бутон
    document.querySelector(`#timeline button[onclick="showEpoch('${epoch}')"]`)
        .classList.add("active-epoch");

    // създай бутоните за събитията
    eventsData[epoch].forEach((ev, i) => {
        const btn = document.createElement("button");
        btn.textContent = ev.title;
        btn.onclick = () => openEvent(epoch, i);
        box.appendChild(btn);
    });
}

function openEvent(epoch, index) {
    const ev = eventsData[epoch][index];
    document.getElementById("event-title").textContent = ev.title;
    document.getElementById("event-text").textContent = ev.text;
    document.getElementById("event-overlay").style.display = "flex";
  const img = document.getElementById("event-img");
if(ev.image){
  img.src = ev.image;
  img.style.display="block";
  
  
}
else{
  img.style.display="none";
}
 document.querySelectorAll("#events button").forEach(b => b.classList.remove("active-event"));
    document.querySelectorAll("#events button")[index].classList.add("active-event")
 
}

function closeEvent() {
    document.getElementById("event-overlay").style.display = "none";
    document.getElementById("timeline").classList.remove("timeline-disabled");
}




function showQuiz() {
    const box = document.getElementById("quiz-box");
    box.innerHTML = "";

    quizQuestions.forEach((q, i) => {
        const d = document.createElement("div");
        d.className = "quiz-question";

        d.innerHTML = `
            <p>${q.q}</p>
            ${q.options.map((o, j) => `
                <div class="answer">
                    <input type="radio" id="q${i}_${j}" name="q${i}" value="${o}">
                    <label for="q${i}_${j}">${o}</label>
                </div>
            `).join("")}
        `;

        box.appendChild(d);
    });

    document.getElementById("quiz-result-btn").style.display = "block";


}


function checkQuiz() {
    let points = 0;

    quizQuestions.forEach((q, i) => {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        const answers = document.querySelectorAll(`input[name="q${i}"] + label`);

        // Премахваме стари маркери
        answers.forEach(label => {
            label.querySelector('.result-mark')?.remove();
        });

        // Добавяме маркер за избрания отговор
        if (selected) {
            const mark = document.createElement('span');
            mark.className = 'result-mark';
            if (selected.value === q.correct) {
                mark.textContent = '✔';
                points++;
            } else {
                mark.textContent = '✖';
            }
            selected.nextElementSibling.appendChild(mark);
        }

        // Ако е грешен, показваме тикче до верния отговор
        if (selected && selected.value !== q.correct) {
            const correctInput = document.querySelector(`input[name="q${i}"][value="${q.correct}"]`);
            const correctMark = document.createElement('span');
            correctMark.className = 'result-mark';
            correctMark.textContent = '✔';
            correctInput.nextElementSibling.appendChild(correctMark);
        }
    });

    showReward(points);
}


// Функция за показване на щит според точките

   
 
    
function shuffleArray(arr) {
    return arr.sort(() => Math.random() - 0.5);
}
document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("show-quiz-btn").addEventListener("click", showQuiz);
    document.getElementById("shuffle-btn").addEventListener("click", shuffleQuiz);
    document.getElementById("quiz-result-btn").addEventListener("click", checkQuiz);

    // първоначално скрий бутона за резултат
    document.getElementById("quiz-result-btn").style.display = "none";
});
function showReward(points) {
    const oldReward = document.querySelector('.reward-background');
    if (oldReward) oldReward.remove();

    let shieldClass = '';
    let gradeText = '';

    if (points >= 8) {
        shieldClass = 'gold-shield';
        gradeText = 'Отлично';
    } else if (points >= 5) {
        shieldClass = 'bronze-shield';
        gradeText = 'Много добре';
    } else {
        shieldClass = 'silver-shield';
        gradeText = 'Погледни отново';
    }

    const rewardDiv = document.createElement('div');
    rewardDiv.className = 'reward-background';
    rewardDiv.innerHTML = `
        <div style="text-align:center;">
            <div class="shield ${shieldClass}">
                ${points} / 9
            </div>
            <div style="margin-top:10px;">
                ${gradeText}
            </div>
        </div>
    `;

    rewardDiv.onclick = () => rewardDiv.remove();
    document.body.appendChild(rewardDiv);
}
window.addEventListener("load", () => {
    quizQuestions = quizQuestions.map(q => ({
        ...q,
        options: shuffleArray([...q.options])
    }));

    quizQuestions = shuffleArray(quizQuestions);
});












































